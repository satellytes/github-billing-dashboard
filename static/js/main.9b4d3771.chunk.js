(this["webpackJsonpgithub-billing-dashboard"]=this["webpackJsonpgithub-billing-dashboard"]||[]).push([[0],{185:function(t,e,n){},324:function(t,e,n){},325:function(t,e,n){},326:function(t,e,n){},327:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n(64),c=n.n(r),i=(n(185),n(21)),o=n(5),u=function(t){var e=t.onInput,n=Object(a.useRef)(null),r=function(t){t.preventDefault(),n&&n.current&&n.current.files&&e(n.current.files[0])};return Object(o.jsx)("div",{className:"file-uploader",children:Object(o.jsx)("form",{onSubmit:r,children:Object(o.jsxs)("label",{children:["Upload file:",Object(o.jsx)("input",{type:"file",ref:n,onInput:r})]})})})},s=n(93),l=n(334),j=n(335),d=n(339),b=n(90),h=n(91),O=n(74),m=n(71),f=n(176),p=n(158),x=n(328),g=n(329),v=n(343),y=n(330),D=n(331),S=n(341),M=n(332),w=n(333),P=function(t){return t.reduce((function(t,e){var n=0,a=new Date(e.date).toISOString();if(t.find((function(t,e){return n=e,t.day===a})))t[n].entries.push(e),t[n].totalPrice=t[n].totalPrice+e.totalPrice;else{var r={day:a,totalPrice:e.totalPrice,entries:[e]};t.push(r)}return t}),[])},k=function(t){return t.reduce((function(t,e){var n=0,a=new Date(e.date),r=Object(p.a)(a);if(t.find((function(t,e){return n=e,t.from===r.toISOString()})))t[n].entries.push(e),t[n].totalPrice=t[n].totalPrice+e.totalPrice;else{var c=Object(p.a)(a),i=Object(x.a)(a),o={week:"".concat(Object(g.a)(c,"dd.MM.")," - ").concat(Object(g.a)(i,"dd.MM.")),from:c.toISOString(),to:i.toISOString(),weekNumber:Object(v.a)(a),totalPrice:e.totalPrice,entries:[e]};t.push(o)}return t}),[])},N=function(t,e){var n=0;return e.forEach((function(e){e.repositorySlug===t&&(n+=e.totalPrice)})),Math.round(100*n)/100},A=function(t){var e=P(t);return Math.ceil(Math.max.apply(Math,e.map((function(t){return t.totalPrice}))))},E=(n(125),function(t){var e=t.csvData,n=t.groupedBy,a=t.maxValueOfYAxis,r=P(e),c=k(e),i=Object(s.a)(new Set(e.map((function(t){return t.repositorySlug})))),u=["#233666","#96ADEA","#4F79E6","#414C66","#3D5EB3","#233666","#96ADEA","#4F79E6","#414C66","#3D5EB3"];return Object(o.jsx)(l.a,{width:"100%",height:600,children:Object(o.jsxs)(j.a,{data:"daily"===n?r:c,children:[Object(o.jsx)(d.a,{strokeDasharray:"2 2"}),Object(o.jsx)(b.a,{dataKey:"daily"===n?"day":"week",tickFormatter:function(t){return Date.parse(t)?Object(g.a)(new Date(t),"dd.MM."):t},interval:"preserveStart"}),Object(o.jsx)(h.a,{domain:[0,a],unit:" $"}),Object(o.jsx)(O.a,{labelFormatter:function(t){return Date.parse(t)?Object(g.a)(new Date(t),"dd.MM."):t},itemSorter:function(t){return t.value}}),Object(o.jsx)(m.a,{}),i.map((function(t,e){return Object(o.jsx)(f.a,{dataKey:function(e){return N(t,e.entries)},stackId:"a",fill:u[e],name:t,unit:"$"},e)}))]})})}),B=n(340),C=n(173),I=function(t){var e=t.csvData,n=t.groupedBy,a=t.maxValueOfYAxis,r=P(e),c=k(e),i=Object(s.a)(new Set(e.map((function(t){return t.repositorySlug})))),u=["#233666","#96ADEA","#4F79E6","#414C66","#3D5EB3","#233666","#96ADEA","#4F79E6","#414C66","#3D5EB3"];return Object(o.jsx)(l.a,{width:"100%",height:1e3,children:Object(o.jsxs)(B.a,{data:"daily"===n?r:c,margin:{top:5,right:30,left:20,bottom:5},children:[Object(o.jsx)(b.a,{dataKey:"daily"===n?"day":"week",tickFormatter:function(t){return Date.parse(t)?Object(g.a)(new Date(t),"dd.MM."):t},interval:"preserveStart"}),Object(o.jsx)(h.a,{domain:[0,a],unit:" $"}),Object(o.jsx)(O.a,{labelFormatter:function(t){return Date.parse(t)?Object(g.a)(new Date(t),"dd.MM."):t},itemSorter:function(t){return t.value}}),Object(o.jsx)(m.a,{}),i.map((function(t,e){return Object(o.jsx)(C.a,{type:"monotone",stroke:u[e],dataKey:function(e){return N(t,e.entries)},name:t,unit:"$",strokeWidth:4,dot:!1},e)}))]})})},F=(n(324),Object(a.createContext)({activeMonth:{monthName:"",data:[]},setActiveMonth:function(t,e){}})),L=function(t){var e=t.csvData,n=Object(a.useState)("Bar"),r=Object(i.a)(n,2),c=r[0],u=r[1],s=Object(a.useState)("daily"),l=Object(i.a)(s,2),j=l[0],d=l[1],b=Object(a.useContext)(F).activeMonth,h=A(e),O=function(t){var e=k(t);return Math.ceil(Math.max.apply(Math,e.map((function(t){return t.totalPrice}))))}(e),m="daily"===j?h:O,f=""===b.monthName?e:b.data;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h2",{children:"Angezeigter Zeitraum"}),Object(o.jsx)("p",{children:b.monthName||"".concat(e[0].date," bis ").concat(e[e.length-1].date," (kompletter Datensatz)")}),Object(o.jsxs)("div",{className:"toggle-button-div",children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("button",{className:"toggle-button left-toggle-button ".concat("daily"===j?"selected-button":null),onClick:function(){return d("daily")},children:"Daily"}),Object(o.jsx)("button",{className:"toggle-button right-toggle-button ".concat("weekly"===j?"selected-button":null),onClick:function(){return d("weekly")},children:"Weekly"})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("button",{className:"toggle-button left-toggle-button ".concat("Bar"===c?"selected-button":null),onClick:function(){return u("Bar")},children:"Bar"}),Object(o.jsx)("button",{className:"toggle-button right-toggle-button ".concat("Line"===c?"selected-button":null),onClick:function(){return u("Line")},children:"Line"})]})]}),"Bar"===c?Object(o.jsx)(E,{maxValueOfYAxis:m,csvData:f,groupedBy:j}):Object(o.jsx)(I,{maxValueOfYAxis:m,csvData:f,groupedBy:j})]})},V=(n(325),function(t){var e=t.monthlyEntry,n=t.maxValueOfYAxis,r=Object(a.useContext)(F),c=r.activeMonth,i=r.setActiveMonth,u=P(e.entries);return Object(o.jsxs)("div",{className:"monthly-widget"+(c.monthName===e.monthName?" monthly-widget-active":""),onClick:function(){return i(e.monthName,e.entries)},children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("h4",{children:e.monthName}),Object(o.jsx)("p",{children:"".concat(Math.round(100*e.totalPrice)/100," $")})]}),Object(o.jsxs)(B.a,{cursor:"pointer",width:100,height:50,data:u,margin:{top:5,right:30,left:20,bottom:5},className:"mini-chart",children:[Object(o.jsx)(h.a,{hide:!0,domain:[0,n]}),Object(o.jsx)(C.a,{type:"monotone",dataKey:"totalPrice",stroke:"#82ca9d",dot:!1})]})]})}),Y=(n(326),function(t){var e=t.csvData,n=A(e),a=function(t){return t.reduce((function(t,e){var n=0,a=new Date(e.date),r=Object(y.a)(a).toISOString();if(t.find((function(t,e){return n=e,t.from===r})))t[n].entries.push(e),t[n].totalPrice=t[n].totalPrice+e.totalPrice;else{var c=Object(y.a)(a),i=Object(D.a)(a),o={monthName:"".concat(Object(S.a)(a,"LLLL")," ").concat(Object(M.a)(a)),month:Object(w.a)(a)+1,from:c.toISOString(),to:i.toISOString(),totalPrice:e.totalPrice,entries:[e]};t.push(o)}return t}),[])}(e);return Object(o.jsx)("div",{className:"widget-container",children:a.map((function(t){return Object(o.jsx)(V,{monthlyEntry:t,maxValueOfYAxis:n},t.month)}))})}),K=n(118),$=n(174),z=function(){var t=Object(a.useState)(null),e=Object(i.a)(t,2),n=e[0],r=e[1],c=Object(a.useState)({monthName:"",data:[]}),s=Object(i.a)(c,2),l=s[0],j=s[1];return Object(o.jsx)(F.Provider,{value:{activeMonth:l,setActiveMonth:function(t,e){return function(t,e){t===l.monthName?j({monthName:"",data:[]}):j({monthName:t,data:e})}(t,e)}},children:Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(u,{onInput:function(t){(function(t){return new Promise((function(e,n){Object($.parse)(t,{header:!0,skipEmptyLines:!0,transformHeader:function(t){return t.toLowerCase().replace(/[^a-zA-Z0-0]+(.)/g,(function(t,e){return e.toUpperCase()}))},complete:function(t){var n=t.data.map((function(t){var e=t.pricePerUnit.substring(1);return Object(K.a)(Object(K.a)({},t),{},{totalPrice:parseFloat(t.quantity)*parseFloat(e)})}));e(n)}})}))})(t).then((function(t){r(t)}))}}),n&&Object(o.jsx)(Y,{csvData:n}),n&&Object(o.jsx)(L,{csvData:n})]})})};c.a.render(Object(o.jsx)(z,{}),document.getElementById("root"))}},[[327,1,2]]]);
//# sourceMappingURL=main.9b4d3771.chunk.js.map