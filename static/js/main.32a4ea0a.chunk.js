(this["webpackJsonpgithub-billing-dashboard"]=this["webpackJsonpgithub-billing-dashboard"]||[]).push([[0],{182:function(t,e,n){},319:function(t,e,n){},320:function(t,e,n){},321:function(t,e,n){},322:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n(80),c=n.n(r),i=(n(182),n(21)),o=n(3),u=function(t){var e=t.onInput,n=Object(a.useRef)(null),r=function(t){t.preventDefault(),n&&n.current&&n.current.files&&e(n.current.files[0])};return Object(o.jsx)("div",{className:"file-uploader",children:Object(o.jsx)("form",{onSubmit:r,children:Object(o.jsxs)("label",{children:["Upload file:",Object(o.jsx)("input",{type:"file",ref:n,onInput:r})]})})})},s=n(92),l=n(329),j=n(333),d=n(89),b=n(90),h=n(71),O=n(68),m=n(173),f=n(156),p=n(323),x=n(324),g=n(337),v=n(325),y=n(326),D=n(335),M=n(327),S=n(328),w=function(t){return t.reduce((function(t,e){var n=0,a=new Date(e.date).toISOString();if(t.find((function(t,e){return n=e,t.day===a})))t[n].entries.push(e),t[n].totalPrice=t[n].totalPrice+e.totalPrice;else{var r={day:a,totalPrice:e.totalPrice,entries:[e]};t.push(r)}return t}),[])},P=function(t){return t.reduce((function(t,e){var n=0,a=new Date(e.date),r=Object(f.a)(a);if(t.find((function(t,e){return n=e,t.from===r.toISOString()})))t[n].entries.push(e),t[n].totalPrice=t[n].totalPrice+e.totalPrice;else{var c=Object(f.a)(a),i=Object(p.a)(a),o={week:"".concat(Object(x.a)(c,"dd.MM.")," - ").concat(Object(x.a)(i,"dd.MM.")),from:c.toISOString(),to:i.toISOString(),weekNumber:Object(g.a)(a),totalPrice:e.totalPrice,entries:[e]};t.push(o)}return t}),[])},k=function(t,e){var n=0;return e.forEach((function(e){e.repositorySlug===t&&(n+=e.totalPrice)})),Math.round(100*n)/100},N=function(t){var e=w(t);return Math.ceil(Math.max.apply(Math,e.map((function(t){return t.totalPrice}))))},A=(n(123),function(t){var e=t.csvData,n=t.groupedBy,a=t.maxValueOfYAxis,r=w(e),c=P(e),i=Object(s.a)(new Set(e.map((function(t){return t.repositorySlug})))),u=["#233666","#96ADEA","#4F79E6","#414C66","#3D5EB3","#233666","#96ADEA","#4F79E6","#414C66","#3D5EB3"];return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)(l.a,{width:1e3,height:600,data:"daily"===n?r:c,children:[Object(o.jsx)(j.a,{strokeDasharray:"2 2"}),Object(o.jsx)(d.a,{dataKey:"daily"===n?"day":"week",tickFormatter:function(t){return Date.parse(t)?Object(x.a)(new Date(t),"dd.MM."):t},interval:"preserveStart"}),Object(o.jsx)(b.a,{domain:[0,a],unit:" $"}),Object(o.jsx)(h.a,{labelFormatter:function(t){return Date.parse(t)?Object(x.a)(new Date(t),"dd.MM."):t}}),Object(o.jsx)(O.a,{}),i.map((function(t,e){return Object(o.jsx)(m.a,{dataKey:function(e){return k(t,e.entries)},stackId:"a",fill:u[e],name:t,unit:"$"},e)}))]})})}),E=n(334),B=n(170),C=function(t){var e=t.csvData,n=t.groupedBy,a=t.maxValueOfYAxis,r=w(e),c=P(e),i=Object(s.a)(new Set(e.map((function(t){return t.repositorySlug})))),u=["#233666","#96ADEA","#4F79E6","#414C66","#3D5EB3","#233666","#96ADEA","#4F79E6","#414C66","#3D5EB3"];return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)(E.a,{width:1e3,height:600,data:"daily"===n?r:c,margin:{top:5,right:30,left:20,bottom:5},children:[Object(o.jsx)(d.a,{dataKey:"daily"===n?"day":"week",tickFormatter:function(t){return Date.parse(t)?Object(x.a)(new Date(t),"dd.MM."):t},interval:"preserveStart"}),Object(o.jsx)(b.a,{domain:[0,a],unit:" $"}),Object(o.jsx)(h.a,{labelFormatter:function(t){return Date.parse(t)?Object(x.a)(new Date(t),"dd.MM."):t}}),Object(o.jsx)(O.a,{}),i.map((function(t,e){return Object(o.jsx)(B.a,{type:"monotone",stroke:u[e],dataKey:function(e){return k(t,e.entries)},name:t,unit:"$",strokeWidth:4,dot:!1},e)}))]})})},F=(n(319),Object(a.createContext)({activeMonth:{monthName:"",data:[]},setActiveMonth:function(t,e){}})),I=function(t){var e=t.csvData,n=Object(a.useState)("Bar"),r=Object(i.a)(n,2),c=r[0],u=r[1],s=Object(a.useState)("daily"),l=Object(i.a)(s,2),j=l[0],d=l[1],b=Object(a.useContext)(F).activeMonth,h=N(e),O=function(t){var e=P(t);return Math.ceil(Math.max.apply(Math,e.map((function(t){return t.totalPrice}))))}(e),m="daily"===j?h:O,f=""===b.monthName?e:b.data;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h2",{children:"Angezeigter Zeitraum"}),Object(o.jsx)("p",{children:b.monthName||"".concat(e[0].date," bis ").concat(e[e.length-1].date," (kompletter Datensatz)")}),Object(o.jsxs)("div",{className:"toggle-button-div",children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("button",{className:"toggle-button left-toggle-button ".concat("daily"===j?"selected-button":null),onClick:function(){return d("daily")},children:"Daily"}),Object(o.jsx)("button",{className:"toggle-button right-toggle-button ".concat("weekly"===j?"selected-button":null),onClick:function(){return d("weekly")},children:"Weekly"})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("button",{className:"toggle-button left-toggle-button ".concat("Bar"===c?"selected-button":null),onClick:function(){return u("Bar")},children:"Bar"}),Object(o.jsx)("button",{className:"toggle-button right-toggle-button ".concat("Line"===c?"selected-button":null),onClick:function(){return u("Line")},children:"Line"})]})]}),"Bar"===c?Object(o.jsx)(A,{maxValueOfYAxis:m,csvData:f,groupedBy:j}):Object(o.jsx)(C,{maxValueOfYAxis:m,csvData:f,groupedBy:j})]})},L=(n(320),function(t){var e=t.monthlyEntry,n=t.maxValueOfYAxis,r=Object(a.useContext)(F),c=r.activeMonth,i=r.setActiveMonth,u=w(e.entries);return Object(o.jsxs)("div",{className:"monthly-widget"+(c.monthName===e.monthName?" monthly-widget-active":""),onClick:function(){return i(e.monthName,e.entries)},children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("h4",{children:e.monthName}),Object(o.jsx)("p",{children:"".concat(Math.round(100*e.totalPrice)/100," $")})]}),Object(o.jsxs)(E.a,{width:100,height:50,data:u,margin:{top:5,right:30,left:20,bottom:5},children:[Object(o.jsx)(b.a,{hide:!0,domain:[0,n]}),Object(o.jsx)(B.a,{type:"monotone",dataKey:"totalPrice",stroke:"#82ca9d",dot:!1})]})]})}),V=(n(321),function(t){var e=t.csvData,n=N(e),a=function(t){return t.reduce((function(t,e){var n=0,a=new Date(e.date),r=Object(v.a)(a).toISOString();if(t.find((function(t,e){return n=e,t.from===r})))t[n].entries.push(e),t[n].totalPrice=t[n].totalPrice+e.totalPrice;else{var c=Object(v.a)(a),i=Object(y.a)(a),o={monthName:"".concat(Object(D.a)(a,"LLLL")," ").concat(Object(M.a)(a)),month:Object(S.a)(a)+1,from:c.toISOString(),to:i.toISOString(),totalPrice:e.totalPrice,entries:[e]};t.push(o)}return t}),[])}(e);return Object(o.jsx)("div",{className:"widget-container",children:a.map((function(t){return Object(o.jsx)(L,{monthlyEntry:t,maxValueOfYAxis:n},t.month)}))})}),Y=n(116),K=n(171),$=function(){var t=Object(a.useState)(null),e=Object(i.a)(t,2),n=e[0],r=e[1],c=Object(a.useState)({monthName:"",data:[]}),s=Object(i.a)(c,2),l=s[0],j=s[1];return Object(o.jsx)(F.Provider,{value:{activeMonth:l,setActiveMonth:function(t,e){return function(t,e){t===l.monthName?j({monthName:"",data:[]}):j({monthName:t,data:e})}(t,e)}},children:Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(u,{onInput:function(t){(function(t){return new Promise((function(e,n){Object(K.parse)(t,{header:!0,skipEmptyLines:!0,transformHeader:function(t){return t.toLowerCase().replace(/[^a-zA-Z0-0]+(.)/g,(function(t,e){return e.toUpperCase()}))},complete:function(t){var n=t.data.map((function(t){var e=t.pricePerUnit.substring(1);return Object(Y.a)(Object(Y.a)({},t),{},{totalPrice:parseFloat(t.quantity)*parseFloat(e)})}));e(n)}})}))})(t).then((function(t){r(t)}))}}),n&&Object(o.jsx)(V,{csvData:n}),n&&Object(o.jsx)(I,{csvData:n})]})})};c.a.render(Object(o.jsx)($,{}),document.getElementById("root"))}},[[322,1,2]]]);
//# sourceMappingURL=main.32a4ea0a.chunk.js.map