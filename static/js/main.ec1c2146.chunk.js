(this["webpackJsonpgithub-billing-dashboard"]=this["webpackJsonpgithub-billing-dashboard"]||[]).push([[0],{191:function(t,e,n){},330:function(t,e,n){},331:function(t,e,n){},332:function(t,e,n){},333:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n(64),c=n.n(r),i=(n(191),n(21)),o=n(5),u=function(t){var e=t.onInput,n=Object(a.useRef)(null),r=function(t){t.preventDefault(),n&&n.current&&n.current.files&&e(n.current.files[0])};return Object(o.jsx)("div",{className:"file-uploader",children:Object(o.jsx)("form",{onSubmit:r,children:Object(o.jsxs)("label",{children:["Upload file:",Object(o.jsx)("input",{type:"file",ref:n,onInput:r})]})})})},s=n(83),l=n(84),j=n(95),d=n(74),b=n(340),O=n(341),h=n(345),f=n(92),m=n(93),p=n(71),x=n(182),v=n(121),g=n(164),y=n(334),D=n(335),M=n(349),N=n(336),S=n(337),P=n(347),k=n(338),w=n(339),A=function(t){return t.reduce((function(t,e){var n=0,a=new Date(e.date).toISOString();if(t.find((function(t,e){return n=e,t.day===a})))t[n].entries.push(e),t[n].totalPrice=t[n].totalPrice+e.totalPrice;else{var r={day:a,totalPrice:e.totalPrice,entries:[e]};t.push(r)}return t}),[])},E=function(t){return t.reduce((function(t,e){var n=0,a=new Date(e.date),r=Object(g.a)(a);if(t.find((function(t,e){return n=e,t.from===r.toISOString()})))t[n].entries.push(e),t[n].totalPrice=t[n].totalPrice+e.totalPrice;else{var c=Object(g.a)(a),i=Object(y.a)(a),o={week:"".concat(Object(D.a)(c,"dd.MM.")," - ").concat(Object(D.a)(i,"dd.MM.")),from:c.toISOString(),to:i.toISOString(),weekNumber:Object(M.a)(a),totalPrice:e.totalPrice,entries:[e]};t.push(o)}return t}),[])},B=function(t,e){var n=0;return e.forEach((function(e){e.repositorySlug===t&&(n+=e.totalPrice)})),Math.round(100*n)/100},C=function(t){var e=A(t);return Math.ceil(Math.max.apply(Math,Object(v.a)(e.map((function(t){return t.totalPrice})))))},I=(n(129),function(t){var e=t.csvData,n=t.groupedBy,a=t.maxValueOfYAxis,r=t.repositoryNames,c=A(e),i=E(e),u=["#233666","#96ADEA","#4F79E6","#414C66","#3D5EB3","#233666","#96ADEA","#4F79E6","#414C66","#3D5EB3"],v=function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return n}(d.a);return Object(o.jsx)(b.a,{width:"100%",height:600,children:Object(o.jsxs)(O.a,{data:"daily"===n?c:i,children:[Object(o.jsx)(h.a,{strokeDasharray:"2 2"}),Object(o.jsx)(f.a,{dataKey:"daily"===n?"day":"week",tickFormatter:function(t){return Date.parse(t)?Object(D.a)(new Date(t),"dd.MM."):t},interval:"preserveStart"}),Object(o.jsx)(m.a,{domain:[0,a],unit:" $"}),Object(o.jsx)(v,{labelFormatter:function(t){return Date.parse(t)?Object(D.a)(new Date(t),"dd.MM."):t},itemSorter:function(t){return t.value?-1*t.value:0}}),Object(o.jsx)(p.a,{}),r.map((function(t,e){return Object(o.jsx)(x.a,{dataKey:function(e){return B(t,e.entries)},stackId:"a",fill:u[e],name:t,unit:"$"},e)}))]})})}),F=n(346),L=n(179),V=function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return n}(d.a),Y=function(t){var e=t.csvData,n=t.groupedBy,a=t.maxValueOfYAxis,r=t.repositoryNames,c=A(e),i=E(e),u=["#233666","#96ADEA","#4F79E6","#414C66","#3D5EB3","#233666","#96ADEA","#4F79E6","#414C66","#3D5EB3"];return Object(o.jsx)(b.a,{width:"100%",height:1e3,children:Object(o.jsxs)(F.a,{data:"daily"===n?c:i,margin:{top:5,right:30,left:20,bottom:5},children:[Object(o.jsx)(f.a,{dataKey:"daily"===n?"day":"week",tickFormatter:function(t){return Date.parse(t)?Object(D.a)(new Date(t),"dd.MM."):t},interval:"preserveStart"}),Object(o.jsx)(m.a,{domain:[0,a],unit:" $"}),Object(o.jsx)(V,{labelFormatter:function(t){return Date.parse(t)?Object(D.a)(new Date(t),"dd.MM."):t},itemSorter:function(t){return t.value?-1*t.value:0}}),Object(o.jsx)(p.a,{}),r.map((function(t,e){return Object(o.jsx)(L.a,{type:"monotone",stroke:u[e],dataKey:function(e){return B(t,e.entries)},name:t,unit:"$",strokeWidth:4,dot:!1},e)}))]})})},K=(n(330),Object(a.createContext)({activeMonth:{monthName:"",data:[]},setActiveMonth:function(){}})),$=function(t){var e=t.csvData,n=Object(a.useState)("Bar"),r=Object(i.a)(n,2),c=r[0],u=r[1],s=Object(a.useState)("daily"),l=Object(i.a)(s,2),j=l[0],d=l[1],b=Object(a.useContext)(K).activeMonth,O=C(e),h=function(t){var e=E(t);return Math.ceil(Math.max.apply(Math,Object(v.a)(e.map((function(t){return t.totalPrice})))))}(e),f="daily"===j?O:h,m=""===b.monthName?e:b.data,p=function(){var t=e.map((function(t){return t.repositorySlug}));return t.filter((function(e,n){return t.indexOf(e)===n}))};return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h2",{children:"Angezeigter Zeitraum"}),Object(o.jsx)("p",{children:b.monthName||"".concat(e[0].date," bis ").concat(e[e.length-1].date," (kompletter Datensatz)")}),Object(o.jsxs)("div",{className:"toggle-button-div",children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("button",{className:"toggle-button left-toggle-button ".concat("daily"===j?"selected-button":null),onClick:function(){return d("daily")},children:"Daily"}),Object(o.jsx)("button",{className:"toggle-button right-toggle-button ".concat("weekly"===j?"selected-button":null),onClick:function(){return d("weekly")},children:"Weekly"})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("button",{className:"toggle-button left-toggle-button ".concat("Bar"===c?"selected-button":null),onClick:function(){return u("Bar")},children:"Bar"}),Object(o.jsx)("button",{className:"toggle-button right-toggle-button ".concat("Line"===c?"selected-button":null),onClick:function(){return u("Line")},children:"Line"})]})]}),"Bar"===c?Object(o.jsx)(I,{maxValueOfYAxis:f,csvData:m,groupedBy:j,repositoryNames:p()}):Object(o.jsx)(Y,{maxValueOfYAxis:f,csvData:m,groupedBy:j,repositoryNames:p()})]})},z=(n(331),function(t){var e=t.monthlyEntry,n=t.maxValueOfYAxis,r=Object(a.useContext)(K),c=r.activeMonth,i=r.setActiveMonth,u=A(e.entries);return Object(o.jsxs)("div",{className:"monthly-widget"+(c.monthName===e.monthName?" monthly-widget-active":""),onClick:function(){return i(e.monthName,e.entries)},children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("h4",{children:e.monthName}),Object(o.jsx)("p",{children:"".concat(Math.round(100*e.totalPrice)/100," $")})]}),Object(o.jsxs)(F.a,{width:100,height:50,data:u,margin:{top:5,right:30,left:20,bottom:5},className:"mini-chart",children:[Object(o.jsx)(m.a,{hide:!0,domain:[0,n]}),Object(o.jsx)(L.a,{type:"monotone",dataKey:"totalPrice",stroke:"#82ca9d",dot:!1})]})]})}),U=(n(332),function(t){var e=t.csvData,n=C(e),a=function(t){return t.reduce((function(t,e){var n=0,a=new Date(e.date),r=Object(N.a)(a).toISOString();if(t.find((function(t,e){return n=e,t.from===r})))t[n].entries.push(e),t[n].totalPrice=t[n].totalPrice+e.totalPrice;else{var c=Object(N.a)(a),i=Object(S.a)(a),o={monthName:"".concat(Object(P.a)(a,"LLLL")," ").concat(Object(k.a)(a)),month:Object(w.a)(a)+1,from:c.toISOString(),to:i.toISOString(),totalPrice:e.totalPrice,entries:[e]};t.push(o)}return t}),[])}(e);return Object(o.jsx)("div",{className:"widget-container",children:a.map((function(t){return Object(o.jsx)(z,{monthlyEntry:t,maxValueOfYAxis:n},t.month)}))})}),J=n(122),W=n(180),Z=function(){var t=Object(a.useState)(null),e=Object(i.a)(t,2),n=e[0],r=e[1],c=Object(a.useState)({monthName:"",data:[]}),s=Object(i.a)(c,2),l=s[0],j=s[1];return Object(o.jsx)(K.Provider,{value:{activeMonth:l,setActiveMonth:function(t,e){return function(t,e){t===l.monthName?j({monthName:"",data:[]}):j({monthName:t,data:e})}(t,e)}},children:Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(u,{onInput:function(t){(function(t){return new Promise((function(e){Object(W.parse)(t,{header:!0,skipEmptyLines:!0,transformHeader:function(t){return t.toLowerCase().replace(/[^a-zA-Z0-0]+(.)/g,(function(t,e){return e.toUpperCase()}))},complete:function(t){var n=t.data.map((function(t){var e=t.pricePerUnit.substring(1);return Object(J.a)(Object(J.a)({},t),{},{totalPrice:parseFloat(t.quantity)*parseFloat(e)})}));e(n)}})}))})(t).then((function(t){r(t)}))}}),n&&Object(o.jsx)(U,{csvData:n}),n&&Object(o.jsx)($,{csvData:n})]})})};c.a.render(Object(o.jsx)(Z,{}),document.getElementById("root"))}},[[333,1,2]]]);
//# sourceMappingURL=main.ec1c2146.chunk.js.map